{"version":3,"sources":["js/tsnejs.js","components/VizCanvas.tsx","models/mappings.ts","components/SelectionKpis.tsx","components/AutoSuggest.js","util/dimensionGroupingUtil.js","components/CheckBox.js","components/DimensionPicker.js","components/Controls.tsx","components/Dropdown.tsx","components/Legends.tsx","layouts/Home.tsx","components/Routes.tsx","App.js","serviceWorker.js","index.tsx"],"names":["tsnejs","REVISION","global","assert","condition","message","getopt","opt","field","defaultval","hasOwnProperty","return_v","v_val","randn","mu","std","gaussRandom","u","Math","random","v","r","c","sqrt","log","zeros","n","isNaN","ArrayBuffer","arr","Array","i","Float64Array","randn2d","d","s","uses","x","xhere","j","push","L2","x1","x2","D","length","x1i","x2i","d2p","perplexity","tol","Nf","N","floor","Htarget","P","prow","betamin","Infinity","betamax","beta","done","num","psum","pj","exp","Hhere","abs","Pout","N2","max","sign","tSNE","this","dim","epsilon","iter","prototype","initDataRaw","X","dists","dist","xtod","initSolution","initDataDist","Y","gains","ystep","getSolution","step","cg","costGrad","cost","grad","ymean","gid","sid","gainid","newgain","newsid","debugGrad","e","yold","cg0","cg1","analytic","numerical","console","pmul","Qu","qsum","dsum","dhere","qu","NN","Q","q","gsum","premult","lib","module","exports","window","width","innerWidth","height","innerHeight","padding","top","right","bottom","left","maxRadius","VizCanvas","props","_this","Object","classCallCheck","_super","call","state","refs","xScale","d3","domain","range","yScale","rScale","clamp","colorScale","transform","context","undefined","initCanvas","_this2","vizCanvas","style","on","handleClick","scaleExtent","translateExtent","zoom","dpr","devicePixelRatio","rect","getBoundingClientRect","getContext","scale","setState","_this3","save","clearRect","translate","y","k","positionData","forEach","node","nodeData","colorDim","dimensions","find","dimension","colorValue","name","radiusDim","value","radiusValue","font","textAlign","beginPath","arc","PI","active","color","globalAlpha","fillStyle","strokeStyle","stroke","closePath","fill","fillText","restore","hitNode","_this4","invertX","offsetX","invertY","offsetY","point","dx","dy","radius","index","selected","objectSpread","onTick","onClick","min","react_default","a","createElement","ref","className","Component","nodes","flatDimensions","allDimensions","flatMap","values","vals","map","foundDim","filter","extent","mean","median","modelData","SelectionDimensions","_ref","dimensionInfo","toFixed","valueNumber","maxNumber","key","backgroundColor","municipalities","entries","municipalityMapping","_ref2","slicedToArray","getSuggestions","inputValue","trim","toLowerCase","inputLength","muni","slice","getSuggestionValue","suggestion","renderSuggestion","AutoSuggest","lookUpCommunityId","communityName","_ref3","_ref4","selectedMunicipalityId","onChange","event","_ref5","newValue","method","onSuggestionsFetchRequested","_ref6","suggestions","onSuggestionsClearRequested","_this$state","inputProps","placeholder","dist_default","React","dimGroupings","dimGroupingJson","group","groupingKey","grouping","keys","Checkbox","isChecked","toggleCheckboxChange","label","onIdChange","ids","id","checkValue","type","checked","DimensionPicker","groupings","changedGoal","kpiIds","merge","selectedKpis","fontWeight","fontSize","href","CheckBox","element","_changeGoalIds","target","Controls","onSelectMunicipalityId","onChangeDimensions","components_DimensionPicker","dims","components_AutoSuggest","Dropdown","options","data","selectedOption","default","react_select_esm","option","menuPlacement","classNamePrefix","Legend","onSelectColor","colorData","onSelectSize","muniSelected","sizeData","components_Dropdown","background","Home","TSNE","animateTSNE","kpis","defaultKpi","sizeDimension","colorDimension","tsneComplete","dataUpdate","_createTSNE","_runTSNE","steps","requestAnimationFrame","selectedNode","isNode","updatedModelData","includes","kpi","Legends","_selectColor","size","_selectSize","Boolean","SelectionKpis","components_Controls","_selectedMunicipalityId","_changeDimensions","components_VizCanvas","_selectNode","RoutesWithRouter","withRouter","location","react_transition_group","mountOnEnter","unmountOnExit","timeout","classNames","react_router_dom","react_router","path","exact","component","history","createBrowserHistory","listen","action","gtag","page_title","pathname","page_path","App","hostname","match","ReactDOM","render","App_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.8f2d9a1c.chunk.js","sourcesContent":["// create main global object\r\nvar tsnejs = tsnejs || { REVISION: 'ALPHA' };\r\n\r\n(function(global) {\r\n  \"use strict\";\r\n\r\n  // utility function\r\n  var assert = function(condition, message) {\r\n    if (!condition) { throw message || \"Assertion failed\"; }\r\n  }\r\n\r\n  // syntax sugar\r\n  var getopt = function(opt, field, defaultval) {\r\n    if(opt.hasOwnProperty(field)) {\r\n      return opt[field];\r\n    } else {\r\n      return defaultval;\r\n    }\r\n  }\r\n\r\n  // return 0 mean unit standard deviation random number\r\n  var return_v = false;\r\n  var v_val = 0.0;\r\n  var gaussRandom = function() {\r\n    if(return_v) {\r\n      return_v = false;\r\n      return v_val;\r\n    }\r\n    var u = 2*Math.random()-1;\r\n    var v = 2*Math.random()-1;\r\n    var r = u*u + v*v;\r\n    if(r == 0 || r > 1) return gaussRandom();\r\n    var c = Math.sqrt(-2*Math.log(r)/r);\r\n    v_val = v*c; // cache this for next function call for efficiency\r\n    return_v = true;\r\n    return u*c;\r\n  }\r\n\r\n  // return random normal number\r\n  var randn = function(mu, std){ return mu+gaussRandom()*std; }\r\n\r\n  // utilitity that creates contiguous vector of zeros of size n\r\n  var zeros = function(n) {\r\n    if(typeof(n)==='undefined' || isNaN(n)) { return []; }\r\n    if(typeof ArrayBuffer === 'undefined') {\r\n      // lacking browser support\r\n      var arr = new Array(n);\r\n      for(var i=0;i<n;i++) { arr[i]= 0; }\r\n      return arr;\r\n    } else {\r\n      return new Float64Array(n); // typed arrays are faster\r\n    }\r\n  }\r\n\r\n  // utility that returns 2d array filled with random numbers\r\n  // or with value s, if provided\r\n  var randn2d = function(n,d,s) {\r\n    var uses = typeof s !== 'undefined';\r\n    var x = [];\r\n    for(var i=0;i<n;i++) {\r\n      var xhere = [];\r\n      for(var j=0;j<d;j++) {\r\n        if(uses) {\r\n          xhere.push(s);\r\n        } else {\r\n          xhere.push(randn(0.0, 1e-4));\r\n        }\r\n      }\r\n      x.push(xhere);\r\n    }\r\n    return x;\r\n  }\r\n\r\n  // compute L2 distance between two vectors\r\n  var L2 = function(x1, x2) {\r\n    var D = x1.length;\r\n    var d = 0;\r\n    for(var i=0;i<D;i++) {\r\n      var x1i = x1[i];\r\n      var x2i = x2[i];\r\n      d += (x1i-x2i)*(x1i-x2i);\r\n    }\r\n    return d;\r\n  }\r\n\r\n  // compute pairwise distance in all vectors in X\r\n  var xtod = function(X) {\r\n    var N = X.length;\r\n    var dist = zeros(N * N); // allocate contiguous array\r\n    for(var i=0;i<N;i++) {\r\n      for(var j=i+1;j<N;j++) {\r\n        var d = L2(X[i], X[j]);\r\n        dist[i*N+j] = d;\r\n        dist[j*N+i] = d;\r\n      }\r\n    }\r\n    return dist;\r\n  }\r\n\r\n  // compute (p_{i|j} + p_{j|i})/(2n)\r\n  var d2p = function(D, perplexity, tol) {\r\n    var Nf = Math.sqrt(D.length); // this better be an integer\r\n    var N = Math.floor(Nf);\r\n    assert(N === Nf, \"D should have square number of elements.\");\r\n    var Htarget = Math.log(perplexity); // target entropy of distribution\r\n    var P = zeros(N * N); // temporary probability matrix\r\n\r\n    var prow = zeros(N); // a temporary storage compartment\r\n    for(var i=0;i<N;i++) {\r\n      var betamin = -Infinity;\r\n      var betamax = Infinity;\r\n      var beta = 1; // initial value of precision\r\n      var done = false;\r\n      var maxtries = 50;\r\n\r\n      // perform binary search to find a suitable precision beta\r\n      // so that the entropy of the distribution is appropriate\r\n      var num = 0;\r\n      while(!done) {\r\n        //debugger;\r\n\r\n        // compute entropy and kernel row with beta precision\r\n        var psum = 0.0;\r\n        for(var j=0;j<N;j++) {\r\n          var pj = Math.exp(- D[i*N+j] * beta);\r\n          if(i===j) { pj = 0; } // we dont care about diagonals\r\n          prow[j] = pj;\r\n          psum += pj;\r\n        }\r\n        // normalize p and compute entropy\r\n        var Hhere = 0.0;\r\n        for(var j=0;j<N;j++) {\r\n          if(psum == 0) {\r\n             var pj = 0;\r\n          } else {\r\n             var pj = prow[j] / psum;\r\n          }\r\n          prow[j] = pj;\r\n          if(pj > 1e-7) Hhere -= pj * Math.log(pj);\r\n        }\r\n\r\n        // adjust beta based on result\r\n        if(Hhere > Htarget) {\r\n          // entropy was too high (distribution too diffuse)\r\n          // so we need to increase the precision for more peaky distribution\r\n          betamin = beta; // move up the bounds\r\n          if(betamax === Infinity) { beta = beta * 2; }\r\n          else { beta = (beta + betamax) / 2; }\r\n\r\n        } else {\r\n          // converse case. make distrubtion less peaky\r\n          betamax = beta;\r\n          if(betamin === -Infinity) { beta = beta / 2; }\r\n          else { beta = (beta + betamin) / 2; }\r\n        }\r\n\r\n        // stopping conditions: too many tries or got a good precision\r\n        num++;\r\n        if(Math.abs(Hhere - Htarget) < tol) { done = true; }\r\n        if(num >= maxtries) { done = true; }\r\n      }\r\n\r\n      // console.log('data point ' + i + ' gets precision ' + beta + ' after ' + num + ' binary search steps.');\r\n      // copy over the final prow to P at row i\r\n      for(var j=0;j<N;j++) { P[i*N+j] = prow[j]; }\r\n\r\n    } // end loop over examples i\r\n\r\n    // symmetrize P and normalize it to sum to 1 over all ij\r\n    var Pout = zeros(N * N);\r\n    var N2 = N*2;\r\n    for(var i=0;i<N;i++) {\r\n      for(var j=0;j<N;j++) {\r\n        Pout[i*N+j] = Math.max((P[i*N+j] + P[j*N+i])/N2, 1e-100);\r\n      }\r\n    }\r\n\r\n    return Pout;\r\n  }\r\n\r\n  // helper function\r\n  function sign(x) { return x > 0 ? 1 : x < 0 ? -1 : 0; }\r\n\r\n  var tSNE = function(opt) {\r\n    var opt = opt || {};\r\n    this.perplexity = getopt(opt, \"perplexity\", 30); // effective number of nearest neighbors\r\n    this.dim = getopt(opt, \"dim\", 2); // by default 2-D tSNE\r\n    this.epsilon = getopt(opt, \"epsilon\", 10); // learning rate\r\n\r\n    this.iter = 0;\r\n  }\r\n\r\n  tSNE.prototype = {\r\n\r\n    // this function takes a set of high-dimensional points\r\n    // and creates matrix P from them using gaussian kernel\r\n    initDataRaw: function(X) {\r\n      var N = X.length;\r\n      var D = X[0].length;\r\n      assert(N > 0, \" X is empty? You must have some data!\");\r\n      assert(D > 0, \" X[0] is empty? Where is the data?\");\r\n      var dists = xtod(X); // convert X to distances using gaussian kernel\r\n      this.P = d2p(dists, this.perplexity, 1e-4); // attach to object\r\n      this.N = N; // back up the size of the dataset\r\n      this.initSolution(); // refresh this\r\n    },\r\n\r\n    // this function takes a given distance matrix and creates\r\n    // matrix P from them.\r\n    // D is assumed to be provided as a list of lists, and should be symmetric\r\n    initDataDist: function(D) {\r\n      var N = D.length;\r\n      assert(N > 0, \" X is empty? You must have some data!\");\r\n      // convert D to a (fast) typed array version\r\n      var dists = zeros(N * N); // allocate contiguous array\r\n      for(var i=0;i<N;i++) {\r\n        for(var j=i+1;j<N;j++) {\r\n          var d = D[i][j];\r\n          dists[i*N+j] = d;\r\n          dists[j*N+i] = d;\r\n        }\r\n      }\r\n      this.P = d2p(dists, this.perplexity, 1e-4);\r\n      this.N = N;\r\n      this.initSolution(); // refresh this\r\n    },\r\n\r\n    // (re)initializes the solution to random\r\n    initSolution: function() {\r\n      // generate random solution to t-SNE\r\n      this.Y = randn2d(this.N, this.dim); // the solution\r\n      this.gains = randn2d(this.N, this.dim, 1.0); // step gains to accelerate progress in unchanging directions\r\n      this.ystep = randn2d(this.N, this.dim, 0.0); // momentum accumulator\r\n      this.iter = 0;\r\n    },\r\n\r\n    // return pointer to current solution\r\n    getSolution: function() {\r\n      return this.Y;\r\n    },\r\n\r\n    // perform a single step of optimization to improve the embedding\r\n    step: function() {\r\n      this.iter += 1;\r\n      var N = this.N;\r\n\r\n      var cg = this.costGrad(this.Y); // evaluate gradient\r\n      var cost = cg.cost;\r\n      var grad = cg.grad;\r\n\r\n      // perform gradient step\r\n      var ymean = zeros(this.dim);\r\n      for(var i=0;i<N;i++) {\r\n        for(var d=0;d<this.dim;d++) {\r\n          var gid = grad[i][d];\r\n          var sid = this.ystep[i][d];\r\n          var gainid = this.gains[i][d];\r\n\r\n          // compute gain update\r\n          var newgain = sign(gid) === sign(sid) ? gainid * 0.8 : gainid + 0.2;\r\n          if(newgain < 0.01) newgain = 0.01; // clamp\r\n          this.gains[i][d] = newgain; // store for next turn\r\n\r\n          // compute momentum step direction\r\n          var momval = this.iter < 250 ? 0.5 : 0.8;\r\n          var newsid = momval * sid - this.epsilon * newgain * grad[i][d];\r\n          this.ystep[i][d] = newsid; // remember the step we took\r\n\r\n          // step!\r\n          this.Y[i][d] += newsid;\r\n\r\n          ymean[d] += this.Y[i][d]; // accumulate mean so that we can center later\r\n        }\r\n      }\r\n\r\n      // reproject Y to be zero mean\r\n      for(var i=0;i<N;i++) {\r\n        for(var d=0;d<this.dim;d++) {\r\n          this.Y[i][d] -= ymean[d]/N;\r\n        }\r\n      }\r\n\r\n      //if(this.iter%100===0) console.log('iter ' + this.iter + ', cost: ' + cost);\r\n      return cost; // return current cost\r\n    },\r\n\r\n    // for debugging: gradient check\r\n    debugGrad: function() {\r\n      var N = this.N;\r\n\r\n      var cg = this.costGrad(this.Y); // evaluate gradient\r\n      var cost = cg.cost;\r\n      var grad = cg.grad;\r\n\r\n      var e = 1e-5;\r\n      for(var i=0;i<N;i++) {\r\n        for(var d=0;d<this.dim;d++) {\r\n          var yold = this.Y[i][d];\r\n\r\n          this.Y[i][d] = yold + e;\r\n          var cg0 = this.costGrad(this.Y);\r\n\r\n          this.Y[i][d] = yold - e;\r\n          var cg1 = this.costGrad(this.Y);\r\n\r\n          var analytic = grad[i][d];\r\n          var numerical = (cg0.cost - cg1.cost) / ( 2 * e );\r\n          console.log(i + ',' + d + ': gradcheck analytic: ' + analytic + ' vs. numerical: ' + numerical);\r\n\r\n          this.Y[i][d] = yold;\r\n        }\r\n      }\r\n    },\r\n\r\n    // return cost and gradient, given an arrangement\r\n    costGrad: function(Y) {\r\n      var N = this.N;\r\n      var dim = this.dim; // dim of output space\r\n      var P = this.P;\r\n\r\n      var pmul = this.iter < 100 ? 4 : 1; // trick that helps with local optima\r\n\r\n      // compute current Q distribution, unnormalized first\r\n      var Qu = zeros(N * N);\r\n      var qsum = 0.0;\r\n      for(var i=0;i<N;i++) {\r\n        for(var j=i+1;j<N;j++) {\r\n          var dsum = 0.0;\r\n          for(var d=0;d<dim;d++) {\r\n            var dhere = Y[i][d] - Y[j][d];\r\n            dsum += dhere * dhere;\r\n          }\r\n          var qu = 1.0 / (1.0 + dsum); // Student t-distribution\r\n          Qu[i*N+j] = qu;\r\n          Qu[j*N+i] = qu;\r\n          qsum += 2 * qu;\r\n        }\r\n      }\r\n      // normalize Q distribution to sum to 1\r\n      var NN = N*N;\r\n      var Q = zeros(NN);\r\n      for(var q=0;q<NN;q++) { Q[q] = Math.max(Qu[q] / qsum, 1e-100); }\r\n\r\n      var cost = 0.0;\r\n      var grad = [];\r\n      for(var i=0;i<N;i++) {\r\n        var gsum = new Array(dim); // init grad for point i\r\n        for(var d=0;d<dim;d++) { gsum[d] = 0.0; }\r\n        for(var j=0;j<N;j++) {\r\n          cost += - P[i*N+j] * Math.log(Q[i*N+j]); // accumulate cost (the non-constant portion at least...)\r\n          var premult = 4 * (pmul * P[i*N+j] - Q[i*N+j]) * Qu[i*N+j];\r\n          for(var d=0;d<dim;d++) {\r\n            gsum[d] += premult * (Y[i][d] - Y[j][d]);\r\n          }\r\n        }\r\n        grad.push(gsum);\r\n      }\r\n\r\n      return {cost: cost, grad: grad};\r\n    }\r\n  }\r\n\r\n  global.tSNE = tSNE; // export tSNE class\r\n})(tsnejs);\r\n\r\n\r\n// export the library to window, or to module in nodejs\r\n(function(lib) {\r\n  \"use strict\";\r\n  if (typeof module === \"undefined\" || typeof module.exports === \"undefined\") {\r\n    window.tsnejs = lib; // in ordinary browser attach library to window\r\n  } else {\r\n    module.exports = lib; // in nodejs\r\n  }\r\n})(tsnejs);\r\n","import React, { Component } from \"react\";\nimport * as d3 from \"d3\";\nimport { Inode, InodeDimension } from \"../models/mappings\";\n\nconst width = window.innerWidth;\nconst height = window.innerHeight;\nconst padding = {\n  top: 50,\n  right: 220,\n  bottom: 0,\n  left: 20,\n};\n\nlet maxRadius = 8;\n\ninterface props {\n  positionData: any[];\n  nodeData: Inode[];\n  colorValue: any;\n  radiusValue: any;\n  onClick: (d: any) => void;\n}\n\ninterface state {\n  context: any;\n}\n\ninterface refs {\n  [key: string]: any;\n}\n\nclass VizCanvas extends Component<props> {\n  state: state;\n  refs: refs = {};\n\n  xScale = d3\n    .scaleLinear()\n    .domain([-8, 6])\n    .range([padding.left, width - padding.left - padding.right]);\n\n  yScale = d3\n    .scaleLinear()\n    .domain([-8, 6])\n    .range([padding.top, height - padding.top - padding.bottom]);\n\n  rScale = d3.scaleSqrt().range([maxRadius, maxRadius]).clamp(true);\n  // rScale = (d: any) => 8;\n\n  colorScale = d3\n    .scaleLinear<string, string>()\n    // .range([\"#ffc000\", \"#091e79\"])\n    .range([\"#fecd00\", \"#006aa8\"])\n    .clamp(true);\n\n  transform = d3.zoomIdentity;\n\n  constructor(props: props) {\n    super(props);\n\n    this.state = {\n      context: undefined,\n    };\n  }\n\n  componentDidMount() {\n    this.initCanvas();\n  }\n\n  initCanvas() {\n    d3.select(this.refs.vizCanvas)\n      .style(\"width\", width + \"px\")\n      .style(\"height\", height + \"px\")\n      .on(\"click\", () => this.handleClick())\n      // .call(d3.drag().subject(dragsubject).on(\"start\", dragstarted).on(\"drag\", dragged).on(\"end\",dragended))\n      .call(\n        d3\n          .zoom()\n          .scaleExtent([0.7, 8])\n          .translateExtent([\n            [-width / 2, -height / 2],\n            [(width * 3) / 2, (height * 3) / 2],\n          ])\n          .on(\"zoom\", () => this.zoom())\n      );\n\n    let dpr = window.devicePixelRatio || 1,\n      rect = this.refs.vizCanvas.getBoundingClientRect();\n\n    this.refs.vizCanvas.width = rect.width * dpr;\n    this.refs.vizCanvas.height = rect.height * dpr;\n\n    let context = this.refs.vizCanvas.getContext(\"2d\");\n    context.scale(dpr, dpr);\n\n    this.setState({ context });\n  }\n\n  onTick() {\n    if (!this.state.context) return;\n    let context: CanvasRenderingContext2D = this.state.context;\n\n    context.save();\n\n    context.clearRect(0, 0, width, height);\n    context.translate(this.transform.x, this.transform.y);\n    context.scale(this.transform.k, this.transform.k);\n    this.props.positionData.forEach((d, i) => {\n      const node = this.props.nodeData[i];\n\n      const colorDim: InodeDimension = node.dimensions.find(\n          (d) => d.dimension === this.props.colorValue.name\n        ) as InodeDimension,\n        radiusDim: InodeDimension = node.dimensions.find(\n          (d) => d.dimension === this.props.colorValue.name\n        ) as InodeDimension;\n\n      const colorValue =\n        colorDim && colorDim.value !== null ? +colorDim.value : -1;\n      const radiusValue =\n        radiusDim && radiusDim.value !== undefined ? +radiusDim.value : -1;\n\n      context.font = \"10px arial\";\n      context.textAlign = \"center\";\n\n      // context.globalCompositeOperation = 'overlay'\n      context.beginPath();\n      if (radiusValue > 0) {\n        context.arc(\n          // @ts-ignore\n          this.xScale(d[0]),\n          this.yScale(d[1]),\n          this.rScale(radiusValue),\n          0,\n          2 * Math.PI,\n          true\n        );\n      } else {\n        context.arc(\n          // @ts-ignore\n          this.xScale(d[0]),\n          this.yScale(d[1]),\n          2,\n          0,\n          2 * Math.PI,\n          true\n        );\n      }\n\n      if (node.active) {\n        node.color = this.colorScale(colorValue);\n        context.globalAlpha = 1;\n        // @ts-ignore\n        context.fillStyle = colorValue > -1 ? node.color : \"#fff\";\n      } else {\n        context.globalAlpha = 0.3;\n        context.fillStyle = \"#333\";\n      }\n\n      if (!radiusValue) {\n        context.strokeStyle = \"#333\";\n        context.stroke();\n      }\n\n      context.closePath();\n      context.fill();\n\n      if (colorValue === -1) {\n        context.fillStyle = \"#333\";\n      }\n\n      // @ts-ignore\n      if (this.rScale(radiusValue) > 2 || node.active) {\n        // context.globalCompositeOperation = 'source-over'\n        context.fillText(\n          node.name,\n          // @ts-ignore\n          this.xScale(d[0]),\n          // @ts-ignore\n          this.yScale(d[1]) - 1.5 * this.rScale(radiusValue)\n        );\n      }\n    });\n\n    context.restore();\n  }\n\n  handleClick() {\n    let x = this.transform.invertX(d3.event.offsetX),\n      y = this.transform.invertY(d3.event.offsetY);\n\n    let hitNode: any;\n\n    this.props.positionData.forEach((point, i) => {\n      // @ts-ignore\n      let dx = x - this.xScale(point[0]);\n      // @ts-ignore\n      let dy = y - this.yScale(point[1]);\n      let node = this.props.nodeData[i];\n\n      let radius = node.dimensions[this.props.radiusValue.index].value || 0;\n      radius = Math.max(0, +radius);\n      // @ts-ignore\n      radius = this.rScale(radius);\n      let hit = dx * dx + dy * dy < radius * radius;\n\n      if (hit) {\n        hitNode = {\n          point,\n          index: i,\n          x: point[0],\n          y: point[1],\n        };\n      }\n    });\n\n    if (hitNode) {\n      this.props.nodeData.forEach((node) => {\n        node.active = false;\n        node.selected = false;\n      });\n\n      hitNode = {\n        ...this.props.nodeData[hitNode.index],\n        ...hitNode,\n      };\n\n      let node = this.props.nodeData[hitNode.index];\n      node.active = true;\n      node.selected = true;\n\n      let colorValue = node.dimensions[this.props.colorValue.index].value || 0;\n\n      if (colorValue == -1) {\n        hitNode.color = \"#333\";\n      } else {\n        hitNode.color = this.colorScale(+colorValue);\n      }\n    } else {\n      this.props.nodeData.forEach((node) => {\n        node.active = true;\n        node.selected = false;\n      });\n\n      hitNode = null;\n    }\n\n    this.onTick();\n    this.props.onClick(hitNode);\n  }\n\n  zoom() {\n    this.transform = d3.event.transform;\n    this.onTick();\n  }\n\n  render() {\n    this.colorScale.domain([\n      this.props.colorValue.min,\n      this.props.colorValue.max,\n    ]);\n    // this.rScale.domain([\n    //   this.props.radiusValue.min,\n    //   this.props.radiusValue.max,\n    // ]);\n\n    this.onTick();\n\n    return (\n      <canvas\n        width={width}\n        height={height}\n        ref=\"vizCanvas\"\n        className=\"viz-canvas\"\n      ></canvas>\n    );\n  }\n}\n\nexport default VizCanvas;\n","import * as d3 from \"d3\";\n\n// import goalsData from \"../data_set/goals/all_goals_latest_years.json\";\n\n// import goalIdMapping from \"../data_set/mapping/goalIdMapping.json\";\n\n// import municipalityIds from \"../data_set/municipalityIdMapping.json\";\n\nimport nodes from \"../data_set/un_data_nodes.json\";\nimport allDimensions from \"../data_set/un_data_dimension_grouping.json\";\n\nexport interface Idimension {\n  name: string;\n  max: number | undefined;\n  min: number | undefined;\n  mean: number | undefined;\n  median: number | undefined;\n  index: number;\n}\n\nexport interface InodeDimension {\n  dimension: string;\n  value: number;\n}\n\nexport interface Inode {\n  dimensions: InodeDimension[];\n  active?: boolean;\n  name: string;\n  color?: string;\n  selected?: boolean;\n}\n\nconst nodeData: any[] = nodes;\n\nconst flatDimensions: string[] = <string[]>allDimensions.flatMap((d) => {\n  const dims = Object.values(d);\n  return dims[0];\n});\n\nconst dimensions: { [key: string]: Idimension } = {};\n\nconsole.log(\"nodeData\", nodeData);\n\nflatDimensions.forEach((dim, i) => {\n  const vals: number[] = <number[]>nodeData\n    .map((node: any) => {\n      node.active = true;\n      const foundDim: InodeDimension | undefined = node.dimensions.find(\n        (d: InodeDimension) => d.dimension === dim\n      );\n      return foundDim && foundDim.value !== null ? +foundDim.value : null;\n    })\n    .filter((v) => v !== null);\n\n  const extent = d3.extent(vals);\n  const mean = d3.mean(vals);\n  const median = d3.median(vals);\n\n  // Skip any duplicates (there are 5)\n  if (dimensions[dim]) return;\n\n  dimensions[dim] = {\n    name: dim,\n    max: extent[1],\n    min: extent[0],\n    mean,\n    median,\n    index: i,\n  };\n});\n\nconst modelData: number[][] = nodeData.map((node) => {\n  const dimensionArr = node.dimensions.map((dimension: InodeDimension) => {\n    const v = dimension.value === null ? -1 : +dimension.value;\n    return v;\n  });\n\n  return dimensionArr;\n});\n\nexport { nodeData, modelData, dimensions };\n","import React, { Component } from \"react\"\nimport { dimensions, Inode, Idimension, InodeDimension } from '../models/mappings'\n\ninterface props {\n  node: Inode\n}\n\nconst SelectionDimensions = ({ node }: props) => {\n\n  if( !node ) return (<div />)\n\n  return (\n    <div className=\"selection-dimensions-container\">\n\n      <div className=\"municipality-wrap\">\n\n        <div className=\"municipality-name\">{ node.name }</div>\n\n        { node && node.dimensions.map((dimension: InodeDimension, i: number) => {\n            if(dimension) {\n              const dimensionInfo: Idimension = dimensions[ dimension.dimension ]\n\n              let min = dimensionInfo.min ? dimensionInfo.min.toFixed(0) : 'No min',\n                max = dimensionInfo.max ? dimensionInfo.max.toFixed(0) : 'No max',\n                // median = dimensionInfo.median ? dimensionInfo.median.toFixed(0) : 'No mean',\n                value = +dimension.value > -1 ? (+dimension.value).toFixed(1) : 'No data'\n\n              // TODO: Use better logic\n              const valueNumber = +dimension.value || 0,\n                maxNumber = dimensionInfo.max ? +dimensionInfo.max : valueNumber\n\n              return (\n                <div key={ i }>\n                  <div className=\"dimension-title\">\n                    { dimension.dimension }\n                  </div>\n                  <div className=\"dimension-value-container\">\n                    <div className=\"dimension-value-bar\" style={{ backgroundColor: node.color, width: (100 * valueNumber/maxNumber) + '%' }}></div>\n                    <div className=\"dimension-min\">{ min }</div>\n                    {/* <div className=\"dimension-mean\">{ median }</div> */}\n                    <div className=\"dimension-value\">{ value }</div>\n                    <div className=\"dimension-max\">{ max }</div>\n                  </div>\n                </div>\n              )\n            }\n          })\n        }\n\n      </div>\n    </div>\n  )\n}\n\nexport default SelectionDimensions;\n","import React, { Component } from \"react\";\nimport Autosuggest from \"react-autosuggest\";\nimport municipalityMapping from \"../data_set/municipalityIdMapping\";\n\nvar municipalities = [];\n\nObject.entries(municipalityMapping).forEach(([key, value]) => {\n  municipalities.push({ value: key, name: value });\n});\n\n// Teach Autosuggest how to calculate suggestions for any given input value.\nconst getSuggestions = value => {\n  const inputValue = value.trim().toLowerCase();\n  const inputLength = inputValue.length;\n\n  return inputLength === 0\n    ? []\n    : municipalities.filter(\n        muni => muni.name.toLowerCase().slice(0, inputLength) === inputValue\n      );\n};\n\nconst getSuggestionValue = suggestion => suggestion.name;\n\nconst renderSuggestion = suggestion => <div>{ suggestion.name }</div>;\n\n\nclass AutoSuggest extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      value: \"\",\n      suggestions: []\n    };\n  }\n\n  lookUpCommunityId = communityName => {\n    Object.entries(municipalityMapping).forEach(([key, value]) => {\n      if (value === communityName) {\n        this.props.selectedMunicipalityId(value)\n      }\n    });\n  };\n\n  onChange = (event, { newValue, method }) => {\n    this.setState({\n      value: newValue\n    });\n    if (method === \"click\" || method === \"enter\") {\n      this.lookUpCommunityId(newValue);\n    }\n  };\n\n  onSuggestionsFetchRequested = ({ value }) => {\n    this.setState({\n      suggestions: getSuggestions(value)\n    });\n  };\n\n  onSuggestionsClearRequested = () => {\n    this.setState({\n      suggestions: []\n    });\n  };\n\n  render() {\n    const { value, suggestions } = this.state;\n\n    // Autosuggest will pass through all these props to the input.\n    const inputProps = {\n      placeholder: \"Find a Municipality\",\n      value,\n      onChange: this.onChange\n    };\n\n    return (\n      <Autosuggest\n        suggestions={suggestions}\n        onSuggestionsFetchRequested={this.onSuggestionsFetchRequested}\n        onSuggestionsClearRequested={this.onSuggestionsClearRequested}\n        getSuggestionValue={getSuggestionValue}\n        renderSuggestion={renderSuggestion}\n        inputProps={inputProps}\n      />\n    );\n  }\n}\n\nexport default AutoSuggest;\n","import dimGroupingJson from \"../data_set/un_data_dimension_grouping.json\";\nimport { merge } from \"d3-array\";\n\nexport const dimGroupings = dimGroupingJson.map((group) => {\n\treturn {\n\t\t...group,\n\t\tselected: true\n\t}\n})\n\nexport const groupingKey = grouping => {\n\treturn Object.keys(grouping)[0]\n}\n\nexport const selectedKpis = groupings => {\n\tlet kpiIds = []\n\tgroupings.forEach(group => {\n\t\tif (group.selected === true) {\n\t\t\tkpiIds.push(group[groupingKey(group)])\n\t\t}\n\t})\n\treturn merge(kpiIds)\n}","import React, { Component, PropTypes } from \"react\";\n\nclass Checkbox extends Component {\n  state = {\n    isChecked: true\n  };\n\n  toggleCheckboxChange = () => {\n    const { label } = this.props;\n\n    this.setState(({ isChecked }) => ({\n      isChecked: !isChecked\n    }));\n\n    console.log(\"label\", label);\n\n    this.props.onIdChange({ids: this.props.id, checkValue: !this.state.isChecked });\n\n  };\n\n  render() {\n    const { label } = this.props;\n    const { isChecked } = this.state;\n\n    return (\n      <div className=\"checkbox\">\n        <label>\n          <input\n            type=\"checkbox\"\n            value={label}\n            checked={isChecked}\n            onChange={this.toggleCheckboxChange}\n          />\n\n          {label}\n        </label>\n      </div>\n    );\n  }\n}\n\n/*Checkbox.propTypes = {\n  label: PropTypes.string.isRequired,\n  handleCheckboxChange: PropTypes.func.isRequired\n};*/\n\nexport default Checkbox;\n","import React, { Component } from \"react\";\r\nimport { dimGroupings, groupingKey, selectedKpis } from \"../util/dimensionGroupingUtil\";\r\nimport CheckBox from './CheckBox';\r\nimport _ from 'lodash'\r\n\r\nclass DimensionPicker extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tgroupings: dimGroupings,\r\n\t\t}\r\n\t}\r\n\r\n\t_changeGoalIds({ checkValue }, changedGoal) {\r\n\t\tchangedGoal.selected = checkValue\r\n\t\tthis.props.onChange(selectedKpis(this.state.groupings))\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"dimension-picker\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<p style={{ fontWeight: 'bold', fontSize: 20 }}>Dynamic Landscape</p>\r\n\t\t\t\t\t<p>This app runs a machine learning algorithm <a href=\"https://en.wikipedia.org/wiki/T-distributed_stochastic_neighbor_embedding\">known as T-SNE</a> to visually group Sweden's municipalities based on over 50 criteria associated with the UN sustainable development goals. The animation you see is the algorithm analyzing the data in real time.</p>\r\n\t\t\t\t\t<p><strong>Click</strong> a bubble for more detail about the municipality. <strong>Click away</strong> from the municipality to remove focus. <strong>Scrolling your mouse</strong> to zoom in and out. <strong>Click and drag</strong> to pan the visualization.</p>\r\n\t\t\t\t\t<p>Use the dropdowns on the legend in the bottom-right corner to change what criteria influence the size and color of each bubble in the visualization.</p>\r\n\t\t\t\t\t<p>Criteria can be removed from the grouping algorithm by turning them on and off below. Turning a goal off will disable its associated criteria.</p>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{this.state.groupings.map((group, i) => {\r\n\t\t\t\t\tlet label = groupingKey(group)\r\n\t\t\t\t\treturn [\r\n\t\t\t\t\t\t<CheckBox\r\n\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\tlabel={label}\r\n\t\t\t\t\t\t\tid={group[label]}\r\n\t\t\t\t\t\t\tclassName=\"checkbox\"\r\n\t\t\t\t\t\t\tonIdChange={element => this._changeGoalIds(element, group)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t];\r\n\t\t\t\t})}\r\n\r\n\t\t\t\t<br/>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<p><strong>Created by:</strong></p>\r\n\t\t\t\t\t<p><a href=\"https://twitter.com/tylernwolf\" target=\"_blank\">Tyler Wolf</a></p>\r\n\t\t\t\t\t<p><a href=\"https://www.linkedin.com/in/adam-ekberg-26a376a0/\" target=\"_blank\">Adam Ekberg</a></p>\r\n\t\t\t\t\t<p><a href=\"https://www.linkedin.com/in/karlantonbrotmark/\" target=\"_blank\">Karl-Anton Brtmark</a></p>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DimensionPicker;\r\n","import React, { Component } from \"react\";\nimport AutoSuggest from \"../components/AutoSuggest\";\nimport DimensionPicker from \"../components/DimensionPicker\";\n\ninterface props {\n  onSelectMunicipalityId: (d: string) => void\n  onChangeDimensions: (d: string[]) => void\n}\n\nconst Controls = ({ onSelectMunicipalityId, onChangeDimensions }: props) => {\n\n  return (\n    <div>\n      <div className=\"controls-container\">\n\n        <div className=\"control\">\n          <DimensionPicker\n            dimensions={ [] }\n            onChange={ (dims: string[]) => onChangeDimensions(dims) }\n          />\n        </div>\n\n      </div>\n\n      <div className=\"control node-select\">\n        <AutoSuggest\n          selectedMunicipalityId={(selectedMunicipalityId: string) =>\n            onSelectMunicipalityId(selectedMunicipalityId)\n          }\n        />\n      </div>\n\n    </div>\n  );\n}\n\nexport default Controls;\n","import React, { Component } from \"react\";\nimport Select from \"react-select\";\n\ninterface state {\n  selectedOption?: any\n}\n\ninterface props {\n  onChange: (d: any) => void\n  data: any\n  placeholder: any\n  default: number\n}\n\nclass Dropdown extends Component<props> {\n  options: any[] = []\n  state: state\n\n  constructor(props: any) {\n    super(props);\n\n    Object.entries(props.data).forEach(([key, value], i) => {\n      const v: any = value\n      this.options.push( {value: key, label: key} );\n    });\n\n    this.state = {\n      selectedOption: this.options[this.props.default],\n    }\n\n    this.props.onChange({ selectedOption: this.state.selectedOption })\n  }\n\n  onChange(selectedOption: any){\n    this.setState({ selectedOption });\n    this.props.onChange({selectedOption})\n  }\n\n  render() {\n    const { selectedOption } = this.state;\n\n    return (\n        <div className=\"selection-kpis-dropdown\">\n        <Select\n          value={selectedOption}\n          onChange={ (option) => this.onChange(option)}\n          options={this.options}\n          placeholder= {this.props.placeholder}\n          menuPlacement={'top'}\n          classNamePrefix={'legend-dropdown'}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Dropdown;\n","import React, { Component } from \"react\";\nimport * as d3 from \"d3\";\n\nimport Dropdown from \"./Dropdown\";\n\nimport { dimensions } from \"../models/mappings\";\n\ninterface props {\n  onSelectColor: (d: any) => void;\n  onSelectSize: (d: any) => void;\n  colorData: any;\n  sizeData: any;\n  muniSelected: boolean;\n}\n\nconst Legend = ({\n  onSelectColor,\n  onSelectSize,\n  colorData,\n  sizeData,\n  muniSelected,\n}: props) => {\n  let color = colorData,\n    size = sizeData;\n\n  return (\n    <div className={\"legends-container \" + (muniSelected ? \"pushed\" : \"\")}>\n      {/* <div className=\"legend legend-size\">\n\n        <div className=\"control\">\n          <Dropdown\n            default={20}\n            data={dimensions}\n            placeholder=\"Select size\"\n            onChange={(size: any) => onSelectSize(size)}\n          />\n        </div>\n\n        <div className=\"legend-scale\">\n\n          <div className=\"sizes-circles\">\n            <div className=\"big-circle\"></div>\n            <div className=\"medium-circle\"></div>\n            <div className=\"small-circle\"></div>\n          </div>\n\n          <div className=\"sizes-values\">\n            <div className=\"sizes-max\">{ size.max ? size.max.toFixed(0) : '' }</div>\n            <div className=\"sizes-min\">{ size.min ? size.min.toFixed(0) : '' }</div>\n          </div>\n\n        </div>\n\n      </div> */}\n\n      <div className=\"legend legend-color\">\n        <div className=\"control\">\n          <Dropdown\n            default={17}\n            data={dimensions}\n            placeholder=\"Select color\"\n            onChange={(color: any) => onSelectColor(color)}\n          />\n        </div>\n\n        <div className=\"legend-scale\">\n          <div className=\"colors-blocks\">\n            <div\n              className=\"block\"\n              style={{\n                // background:\n                //   \"linear-gradient(90deg, rgba(255,192,0,1) 0%, rgba(9,30,121,1) 100%)\",\n                background: \"linear-gradient(90deg, #fecd00 0%, #006aa8 100%)\",\n                width: 100 + \"%\",\n              }}\n            ></div>\n          </div>\n          <div className=\"colors-values\">\n            <div className=\"colors-min colors-value\">\n              {color.min ? color.min.toFixed(0) : \"\"}\n            </div>\n            <div className=\"colors-max colors-value\">\n              {color.max ? color.max.toFixed(0) : \"\"}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Legend;\n","import React, { Component } from \"react\";\nimport VizCanvas from \"../components/VizCanvas\";\nimport SelectionKpis from \"../components/SelectionKpis\";\nimport Controls from \"../components/Controls\";\nimport { modelData, nodeData, Inode, Idimension } from \"../models/mappings\";\nimport Legends from \"../components/Legends\";\nimport tsnejs from \"../js/tsnejs\";\n\nimport { dimensions } from \"../models/mappings\";\n\ninterface state {\n  positionData: [];\n  tsneComplete: boolean;\n  nodeData: Inode[];\n  modelData: any;\n  sizeDimension: Idimension;\n  colorDimension: Idimension;\n  selectedMunicipalityId?: string;\n  dataUpdate: boolean;\n  selectedNode?: any;\n}\n\nclass Home extends Component {\n  TSNE?: any;\n  animateTSNE: any = {};\n  state: state;\n\n  constructor(props?: any) {\n    super(props);\n\n    // console.log(\"dimensions\", JSON.stringify(dimensions, null, 4));\n    // console.log(\"Object.keys(dimensions)[0]\", Object.keys(dimensions)[0]);\n    // console.log(\n    //   \"dimensions[Object.keys(dimensions)[0]]\",\n    //   JSON.stringify(dimensions[Object.keys(dimensions)[0]], null, 4)\n    // );\n\n    const kpis = dimensions;\n\n    const defaultKpi: string = Object.keys(kpis)[0];\n    const sizeDimension: Idimension = kpis[defaultKpi];\n    const colorDimension: Idimension = kpis[defaultKpi];\n\n    this.state = {\n      positionData: [],\n      tsneComplete: false,\n      nodeData,\n      modelData,\n      sizeDimension, // update this as well?\n      colorDimension, // update this as well?\n      selectedMunicipalityId: undefined,\n      dataUpdate: false,\n    };\n  }\n\n  componentDidMount() {\n    this._createTSNE();\n    // this.TSNE.init();\n  }\n\n  _createTSNE() {\n    let opt = {\n      epsilon: 10,\n      perplexity: 90,\n      dim: 2,\n    };\n\n    if (!this.TSNE) {\n      this.TSNE = new tsnejs.tSNE(opt);\n    }\n\n    this.TSNE.initDataRaw(this.state.modelData);\n\n    this._runTSNE();\n  }\n\n  _runTSNE() {\n    let steps = 0;\n\n    this.animateTSNE = () => {\n      if (this.state.dataUpdate) {\n        this._createTSNE();\n        this.setState({ dataUpdate: false });\n        return (steps = 0);\n      }\n\n      if (steps > 2000) {\n        return;\n      }\n\n      this.TSNE.step();\n\n      const positionData = this.TSNE.getSolution();\n\n      this.setState({\n        positionData,\n      });\n\n      steps++;\n\n      requestAnimationFrame(this.animateTSNE);\n    };\n\n    requestAnimationFrame(this.animateTSNE);\n  }\n\n  _stopTSNE() {\n    this.animateTSNE = () => {};\n  }\n\n  _selectNode(node: any) {\n    this.setState({ selectedNode: node });\n  }\n\n  _selectColor({ selectedOption }: { selectedOption: any }) {\n    const kpi: any = dimensions;\n    const colorDimension: string = kpi[selectedOption.value];\n    this.setState({ colorDimension });\n  }\n\n  _selectSize({ selectedOption }: { selectedOption: any }) {\n    const kpi: any = dimensions;\n    const sizeDimension: string = kpi[selectedOption.value];\n    this.setState({ sizeDimension });\n  }\n\n  _selectedMunicipalityId(name: string) {\n    let selectedNode = null;\n\n    nodeData.forEach((node: any) => {\n      let isNode = node.name == name;\n\n      node.active = isNode;\n      node.selected = isNode;\n\n      if (isNode) selectedNode = node;\n    });\n\n    // let node = this.props.nodeData[ hitNode.index ]\n\n    this.setState({ selectedNode });\n  }\n\n  _changeDimensions(dims: string[]) {\n    const updatedNodeData = nodeData.map((node, i) => {\n      let dimensions = node.dimensions.filter((dimension: any) =>\n        dims.includes(dimension.dimension)\n      );\n\n      return {\n        ...node,\n        dimensions,\n      };\n    });\n\n    let updatedModelData = updatedNodeData.map((muni) => {\n      const kpiArr = muni.dimensions.map((kpi: any) => {\n        const v = kpi.value === undefined ? -1 : kpi.value;\n\n        return v;\n      });\n\n      return kpiArr;\n    });\n\n    // If no data, return all zeroes for everything\n    if (!updatedModelData[0].length) {\n      updatedModelData = updatedModelData.map(() => [0]);\n    }\n\n    // const visibleKpis = dims.map(dim => ({ key: dim, value: dimensionss[dim].name }))\n\n    this.setState({\n      // nodeData: updatedNodeData,\n      modelData: updatedModelData,\n      dataUpdate: true,\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"home-wrap\">\n        <Legends\n          colorData={this.state.colorDimension}\n          sizeData={this.state.sizeDimension}\n          onSelectColor={(color: any) => this._selectColor(color)}\n          onSelectSize={(size: any) => this._selectSize(size)}\n          muniSelected={Boolean(this.state.selectedNode)}\n        />\n\n        <SelectionKpis node={this.state.selectedNode} />\n\n        <Controls\n          onSelectMunicipalityId={(id: string) =>\n            this._selectedMunicipalityId(id)\n          }\n          onChangeDimensions={(dims: string[]) => this._changeDimensions(dims)}\n        />\n\n        <VizCanvas\n          positionData={this.state.positionData}\n          nodeData={this.state.nodeData}\n          radiusValue={this.state.sizeDimension}\n          colorValue={this.state.colorDimension}\n          onClick={(node: any) => this._selectNode(node)}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Home;\n","import React, { Component } from 'react'\nimport {\n  Route,\n  Switch,\n  HashRouter\n} from 'react-router-dom'\nimport { withRouter } from 'react-router'\nimport {\n  CSSTransition,\n  TransitionGroup,\n} from 'react-transition-group'\nimport Home from '../layouts/Home'\n// import Maps from '../layouts/Maps'\n\n\ninterface props {\n  location: any\n}\n\nconst Routes = ({ location }: props) => {\n\n  return (\n    <main>\n      <TransitionGroup>\n        <CSSTransition\n          key={ location.key }\n          mountOnEnter={ true }\n          unmountOnExit={ true }\n          timeout={ 300 }\n          classNames=\"page-level\"\n        >\n          <HashRouter>\n            <Switch>\n              <Route path=\"/\" exact component={ Home }/>\n              {/* <Route path=\"/maps\" exact component={ Maps }/> */}\n              <Route path=\"*\" component={ Home }/>\n            </Switch>\n          </HashRouter>\n        </CSSTransition>\n      </TransitionGroup>\n    </main>\n  )\n  \n}\n\nconst RoutesWithRouter = withRouter(Routes)\n\nexport { RoutesWithRouter }\n","import React, { Component } from \"react\";\nimport { Router } from \"react-router-dom\";\n\nimport { createBrowserHistory } from \"history\";\n\nimport { RoutesWithRouter as Routes } from \"./components/Routes\";\n\nconst history = createBrowserHistory();\nhistory.listen((location, action) => {\n  window.gtag(\"config\", \"UA-137717045-1\", {\n    page_title: location.pathname,\n    page_path: location.pathname\n  });\n});\n\nexport default class App extends Component {\n  render() {\n    return (\n      <Router history={history}>\n        <Routes />\n      </Router>\n    );\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}